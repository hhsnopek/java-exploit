#! /usr/bin/python2.7
"""
'je_server.py' runs the server-side script for collecting CVE Data.
Access any Data from the intended output files:
"""

import logging
import urllib2
from bs4 import BeautifulSoup

# Logging configuration
logger = logging.getLogger('je_server.py')
logger.setLevel(logging.DEBUG)
ch = logging.FileHandler('je_server_log.log')
ch.setLevel(logging.DEBUG)
formatter = logging.Formatter('%(asctime)s - %(name)s - %(levelname)s - %(message)s')
ch.setFormatter(formatter)
logger.addHandler(ch)


def tableparser():
	datacollection = []
	site = 'http://cve.mitre.org/cgi-bin/cvekey.cgi?keyword=Java'
	html = urllib2.urlopen(site).read()
	soup = BeautifulSoup(html, 'html5lib')
	table = soup.find(id='TableWithRules')
	for tr in table:
		name = table.find('td')
		info = name.find_next('td')
		cveinfo = [name.text, info.text]
	print cveinfo

tableparser()
