function getVersion(e,t){var n="",i=https.request({host:"raw.github.com",port:443,path:"/timrwood/moment/"+e},function(e){e.setEncoding("utf8"),e.on("data",function(e){n+=e}),e.on("end",function(){zlib.gzip(n,function(e,i){t(n.length,i.length)})})});i.on("error",function(e){console.log("problem with request: "+e.message)}),i.end()}function printDiffs(e,t,n,i){var r=n-e,s=i-t;console.log("Filesize difference from current branch to "+stable),console.log(stable+"   "+e+" / "+t),console.log("curr    "+n+" / "+i),console.log("diff    "+(r>0?"+":"")+r),console.log("gzip    "+(s>0?"+":"")+s)}var https=require("https"),zlib=require("zlib"),path=require("path"),fs=require("fs"),stable="1.7.1",done;module.exports=function(e){e.registerTask("size","Check the codebase filesize against the latest stable version.",function(){done=this.async(),fs.readFile(path.normalize(__dirname+"/../min/moment.min.js"),"utf8",function(e,t){if(e)throw e;zlib.gzip(t,function(e,n){getVersion(stable+"/min/moment.min.js",function(e,i){printDiffs(e,i,t.length,n.length),done()})})})})};