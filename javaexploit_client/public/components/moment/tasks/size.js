function getVersion(e,t){var n="",a=https.request({host:"raw.github.com",port:443,path:"/timrwood/moment/"+e},function(e){e.setEncoding("utf8"),e.on("data",function(e){n+=e}),e.on("end",function(){zlib.gzip(n,function(e,a){t(n.length,a.length)})})});a.on("error",function(e){console.log("problem with request: "+e.message)}),a.end()}function printDiffs(e,t,n,a){var s=n-e,r=a-t;console.log("Filesize difference from current branch to "+stable),console.log(stable+"   "+e+" / "+t),console.log("curr    "+n+" / "+a),console.log("diff    "+(s>0?"+":"")+s),console.log("gzip    "+(r>0?"+":"")+r)}var https=require("https"),zlib=require("zlib"),path=require("path"),fs=require("fs"),stable="1.7.1",done;module.exports=function(e){e.registerTask("size","Check the codebase filesize against the latest stable version.",function(){done=this.async(),fs.readFile(path.normalize(__dirname+"/../min/moment.min.js"),"utf8",function(e,t){if(e)throw e;zlib.gzip(t,function(e,n){getVersion(stable+"/min/moment.min.js",function(e,a){printDiffs(e,a,t.length,n.length),done()})})})})};