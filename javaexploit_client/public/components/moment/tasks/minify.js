var fs=require("fs"),uglifyjs=require("uglify-js");module.exports=function(e){function t(e){var t,n,i="";for(t=0;e.length>t;++t)n=e[t],i+="comment1"===n.type?"//"+n.value+"\n":"/*"+n.value+"*/";return i}e.registerMultiTask("minwithcomments","Minify lang files with UglifyJS.",function(){var n,i,r,s=e.file.expandFiles(this.file.src);return i=e.helper("concat",s,{separator:this.data.separator}),r=uglifyjs.parser.tokenizer(i),n=t(r().comments_before),n+=e.helper("uglify",i,e.config("uglify")),e.file.write(this.file.dest,n),this.errorCount?!1:(e.log.writeln('File "'+this.file.dest+'" created.'),e.helper("min_max_info",n,i),void 0)})};