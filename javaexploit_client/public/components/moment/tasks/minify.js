var fs=require("fs"),uglifyjs=require("uglify-js");module.exports=function(e){function t(e){var t,a,n="";for(t=0;t<e.length;++t)a=e[t],n+="comment1"===a.type?"//"+a.value+"\n":"/*"+a.value+"*/";return n}e.registerMultiTask("minwithcomments","Minify lang files with UglifyJS.",function(){var a,n,s,r=e.file.expandFiles(this.file.src);return n=e.helper("concat",r,{separator:this.data.separator}),s=uglifyjs.parser.tokenizer(n),a=t(s().comments_before),a+=e.helper("uglify",n,e.config("uglify")),e.file.write(this.file.dest,a),this.errorCount?!1:(e.log.writeln('File "'+this.file.dest+'" created.'),e.helper("min_max_info",a,n),void 0)})};