var fs=require("fs"),uglifyjs=require("uglify-js");module.exports=function(e){function t(e){var t,a,n="";for(t=0;t<e.length;++t)a=e[t],n+="comment1"===a.type?"//"+a.value+"\n":"/*"+a.value+"*/";return n}function a(e){return e=e.replace(/require\([\'\"]\.\.\/moment[\'\"]\)/g,"moment"),n+e+s}var n=["(function(){","    function onload (moment) {",""].join("\n"),s=["","    }",'    if (typeof define === "function" && define.amd) {','        define(["moment"], onload);',"    }",'    if (typeof window !== "undefined" && window.moment) {',"        onload(window.moment);","    }","})()",""].join("\n");e.registerMultiTask("minlang","Minify lang files with UglifyJS.",function(){var n,s,r,_=e.file.expandFiles(this.file.src);return s=e.helper("concat",_,{separator:this.data.separator}),r=uglifyjs.parser.tokenizer(s),n=t(r().comments_before),n+=e.helper("uglify",a(s),e.config("uglify")),e.file.write(this.file.dest,n),this.errorCount?!1:(e.log.writeln('File "'+this.file.dest+'" created.'),e.helper("min_max_info",n,s),void 0)})};